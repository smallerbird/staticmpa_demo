"use strict";function WebAPI(){function t(t,e){try{for(var n=0;n<l.length;n++)l[n](t,e)}catch(t){console.log("_callbackStepStatus error:",t)}}function e(t){u=t}function n(t){d=t}function o(t){c=t}function i(t){l.push(t)}function r(e){t(WebAPI_MSG_START,"post");var n={url:"",body:{},host:"",method:"post",params:{},auth:"",callbackStatusCode:null,middlewareHeader:null};e=$.extend(n,e);var o=e.url,i=e.body,r=e.host,a=e.method,s=e.params,l=e.auth,p=e.callbackStatusCode,f=e.middlewareHeader;""==r&&(r=u),""==l&&(l=c);var w=i,h="";p||(p=function(t){});var S=[];if(s){for(var g in s){var b=typeof s[g];"number"!=b&&"string"!=b||S.push(g+"="+s[g])}h=S.join("&")}var A=o.indexOf("?"),v="&";-1==A&&(v=""!=h?"?":"");var P=r+o+v+h;""==l&&(l=this.globalAuth);var _={"Content-type":"application/x-www-form-urlencoded"};return(""!=l&&"0"!=l||0!=l)&&(_[d]=l),f&&(_=f(_)),jQuery.support.cors=!0,$.ajax({crossDomain:!0,headers:_,type:a,url:P,dataType:"json",data:w,statusCode:{401:function(e){t(WebAPI_MSG_SUCESS,"401"),p(401)},403:function(e){t(WebAPI_MSG_SUCESS,"403"),p(403)},200:function(e){t(WebAPI_MSG_SUCESS,"200")}},error:function(e){t(WebAPI_MSG_ERROR,JSON.stringify(arguments))},success:function(e){t(WebAPI_MSG_SUCESS,JSON.stringify(arguments))}})}function a(t){return t.method="GET",r(t)}function s(t){return t.method="PUT",r(t)}var u="",c="",l=[],d="auth";this.setHost=e,this.setCallbackStepStatus=i,this.setAuth=o,this.setAuthKey=n,this.get=a,this.post=r,this.put=s}function SMPA(){var t=-1;this.DialogLoading=function(){this.DialogLoadingClose(),t=layer.load(1,{shade:[.1,"#fff"]})},this.DialogLoadingClose=function(){-1!=t&&layer.close(t)},this.alert=function(t,e){var n=layer.alert(t,{closeBtn:0},function(){void 0!==e&&e(),layer.close(n)})},this.confirm=function(t,e,n){var o={};void 0!==n&&(o.btn=["是","否"]),void 0!==e&&(e=function(t){});var i=layer.confirm(t,o,function(){e(!0),layer.close(i)},function(){e(!1),layer.close(i)})};this.saveAuth=function(t){$.cookie("StaticMPA_auth12313",t,{expires:1})},this.getAuth=function(){return $.cookie("StaticMPA_auth12313")}}function UserPermissions(){var t="";this.setValue=function(e,n){var o=e;t="";for(var i=0;i<o.length;i++){var r=o[i],a=r.element;""!=t&&(t+=","),t+='[data-permissions="'+a+'"]'}1==!!n&&this.run()},this.run=function(){console.log("run "+t),$(t).show()}}var API_HOST="http://localhost:3001/",AuthKey="sessionKey",WebAPI_MSG_START="WebAPI_MSG_START",WebAPI_MSG_ERROR="WebAPI_MSG_ERROR",WebAPI_MSG_SUCESS="WebAPI_MSG_SUCESS";window.WebAPI=new WebAPI,window.WebAPI.WebAPI_MSG_START=WebAPI_MSG_START,window.WebAPI.WebAPI_MSG_ERROR=WebAPI_MSG_ERROR,window.WebAPI.WebAPI_MSG_SUCESS=WebAPI_MSG_SUCESS,window.SMPA=new SMPA,window.console||(window._console=window.console,window.console=function(t){function e(e){return function(){if("object"==typeof t&&"function"==typeof t[e])return t[e].apply(t,Array.prototype.slice.call(arguments))}}return{log:e("log"),debug:e("debug"),info:e("info"),warn:e("warn"),exception:e("exception"),assert:e("assert"),dir:e("dir"),dirxml:e("dirxml"),trace:e("trace"),group:e("group"),groupCollapsed:e("groupCollapsed"),groupEnd:e("groupEnd"),profile:e("profile"),profileEnd:e("profileEnd"),count:e("count"),clear:e("clear"),time:e("time"),timeEnd:e("timeEnd"),timeStamp:e("timeStamp"),table:e("table"),error:e("error"),memory:e("memory"),markTimeline:e("markTimeline"),timeline:e("timeline"),timelineEnd:e("timelineEnd")}}(window._console)),String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")},String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")},Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},window.str2asc=function(t){return("0"+t.charCodeAt(0).toString(16)).slice(-2)},window.asc2str=function(t){return String.fromCharCode(t)},window.UrlEncode=function(t,e){if(void 0===e&&(e=!0),""==t)return"";e&&(t=encodeURI(t));for(var n="",o="!\"#$%&'()*+,/:;<=>?[]^`{|}~%",i="",r=0;r<t.length;r++){var a=t.charAt(r),s=str2asc(a);i+=a+":"+s+"n",parseInt("0x"+s)>127?n+="%"+s.slice(0,2)+"%"+s.slice(-2):" "==a?n+="+":-1!=o.indexOf(a)?n+="%"+s.toString(16):n+=a}return n},window.UrlDecode=function(t,e){if("undefined"!=typeof decodeURI)return decodeURI(t);if(void 0===e&&(e=!0),!t)return"";if(""==t)return"";for(var n="",o=0;o<t.length;o++){var i=t.charAt(o);if("+"==i)n+=" ";else if("%"==i){var r=t.substring(o+1,o+3);parseInt("0x"+r)>127?(n+=asc2str(parseInt("0x"+r+t.substring(o+4,o+6))),o+=5):(n+=asc2str(parseInt("0x"+r)),o+=2)}else n+=i}return e&&"undefined"!=typeof decodeURI&&(n=decodeURI(n)),n},window.e_stopPropagation=function(t){var e=!1;try{t&&t.stopPropagation?t.stopPropagation():window.event&&(window.event.cancelBubble=!0),e=!0}catch(t){e=!1,console.log("window.e_stopPropagation error",JSON.stringify(t))}return e},window.e_preventDefault=function(t){var e=!1;try{t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1),e=!0}catch(t){e=!1,console.log("window.e_preventDefault error",JSON.stringify(t))}return e},window.BROWSER={versions:function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/)||!!t.match(/AppleWebKit/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},window.BROWSER_IE_versions=function(){var t=navigator.userAgent;return t.indexOf("MSIE")>-1?/\d+/.exec(t.split(";")[1]):-1},window.getRequest=function(t){void 0===t&&(t=location.search);var e=t.split("?"),n={};if(e.length>=2){var o=e[1].split("&");if(o.length>0)for(var i=0;i<o.length;i++){var r=o[i].split("=");n[r[0]]=r[1]}}return n},window.toNumber=function(t){return t=Number(t),isNaN(t)?0:t},Number.prototype.toFixed=function(t){return(parseInt(this*Math.pow(10,t)+.5)/Math.pow(10,t)).toString()},window.toFloat=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=3),t=parseFloat((t+"").replace(/[^\d\.-]/g,"")).toFixed(e)},window.toThousands=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=3),isNaN(t))return"";t=window.toFloat(t||0);var n=(t||0).toString().split(".");return n[0]=n[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,"),n.join(".")},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},i=function(){return n.apply(this instanceof o&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,i.prototype=new o,i}),window.WebAPI.setHost(API_HOST),window.WebAPI.setAuthKey(AuthKey);var login_auth=window.SMPA.getAuth();""!=login_auth&&window.WebAPI.setAuth(login_auth),window.WebAPI.setCallbackStepStatus(function(t,e){t==window.WebAPI.WebAPI_MSG_SUCESS&&"401"==e?window.SMPA.alert("收到401,你没有权限，[重写assets/public.js  window.WebAPI.setCallbackStepStatus],加入自己的逻辑"):t==window.WebAPI.WebAPI_MSG_SUCESS&&"403"==e&&window.SMPA.alert("收到403,你没有权限，[重写assets/public.js   window.WebAPI.setCallbackStepStatus],加入自己的逻辑")}),window.WebAPI.permissions=new UserPermissions,require.config({baseUrl:"/assets/",paths:{},map:{"*":{css:"lib/general/css.min"}}});